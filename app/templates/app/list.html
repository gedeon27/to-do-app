{% load static %}
{% load app_tags %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
  <script src="https://kit.fontawesome.com/4ff0b81e40.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="{% static 'app/css/main.css' %}">
  <title>To Do List</title>
</head>

<body>
  <div class="columns is-centered" id="list-cont" >
    <div class="column is-5" >
      <div class="card has-padd">
        <form method='post' action="">
          {% csrf_token %}
          <input class="input" type="text" placeholder="Add a new task" name="thing">
          <button type="submit" class="button is-primary all-way">Submit</button>
        </form>
        <br>
        {% for list_el in tasks %}
        <div class="box has-background-grey-lighter">
          <nav class="level">
            <div class="level-left">
              <div class="level-item">
                <a href="{% url 'mainapp:edit_task' list_el.id %}" class="button is-primary is-small">Edit</a>
              </div>
              <div class="level-item">
                <a href="{% url 'mainapp:task_completed' list_el.id %}" class="button is-danger is-small">Completed</a>
              </div>
              <div class="level-item">
                {% if list_el.completed %}
                <del>{{ list_el.thing | capitalize_first }}</del>
                {% else %}
                {{ list_el.thing }}
                {% endif %}
              </div>
            </div>
            <div class="level-right">
              <div class="level-item">
                <a href="{% url 'mainapp:delete_task' list_el.id %}"><span class="icon"><i class="fas fa-trash-alt"></i></span></a>
              </div>

            </div>
          </nav>
        </div>
        {% endfor %}

      </div>

      {% if is_active %}
      <div class="modal is-active">
        <div class="modal-background"></div>
        <div class="modal-content">
          <div class="box">
          <form method='post' action="">
            {% csrf_token %}
            <div class="field">
              <input class="input" type="text" name="thing" value="{{ task.thing }}">
            </div>
            <div class="field">
              <input type="checkbox" name="completed" {% if task.completed %} checked="checked" {% endif %}>
              <label for="completed">Completed</label>
            </div>
            <div class="field">
            <button type="submit" class="button is-success" id="edit-btn">Save changes</button>
            <a href="{% url 'mainapp:list' %}"><button class="button" id="edit-btn">Cancel</button></a>
          </div>
          </form>
        </div>
        </div>
        <a href="{% url 'mainapp:list' %}"><button class="modal-close is-large" aria-label="close"></button></a>
      </div>
      {% endif %}

    </div>

  </div>
</div>
</body>
</html>
